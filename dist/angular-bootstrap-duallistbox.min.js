/**
 * angular-bootstrap-duallistbox
 * @version v0.1.0 - 2016-09-26
 * @author Francesco Pontillo (francescopontillo@gmail.com)
 * @link https://github.com/frapontillo/angular-bootstrap-duallistbox
 * @license Apache License 2.0
**/

"use strict";angular.module("frapontillo.bootstrap-duallistbox",[]),angular.module("frapontillo.bootstrap-duallistbox").directive("bsDuallistbox",["$compile","$timeout","$injector",function(a,b,c){function d(){try{return c.get("$translate")}catch(a){return}}var e=d(),f=angular.isDefined(e),g=function(a,b){if(f)return e.instant(b)||a};return{restrict:"A",require:"ngModel",link:function(c,d,e){var f,h=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,i=e.ngOptions.match(h)[7],j=function(a){return a===!0||"true"===a},k={bootstrap2:{changeFn:"setBootstrap2Compatible",transformFn:j},postfix:"setHelperSelectNamePostfix",selectMinHeight:{changeFn:"setSelectOrMinimalHeight",defaultValue:100},filter:{changeFn:"setShowFilterInputs",defaultValue:!0,transformFn:j},filterClear:{changeFn:"setFilterTextClear",defaultValue:g("show all","duallistbox.filterClear")},filterPlaceholder:"setFilterPlaceHolder",filterValues:{changeFn:"setFilterOnValues",transformFn:j},moveOnSelect:{changeFn:"setMoveOnSelect",defaultValue:!0,transformFn:j},preserveSelection:"setPreserveSelectionOnMove",moveSelectedLabel:{changeFn:"setMoveSelectedLabel",defaultValue:g(null,"duallistbox.moveSelectedLabel")},moveAllLabel:{changeFn:"setMoveAllLabel",defaultValue:g(null,"duallistbox.moveAllLabel")},removeSelectedLabel:{changeFn:"setRemoveSelectedLabel",defaultValue:g(null,"duallistbox.removeSelectedLabel")},removeAllLabel:{changeFn:"setRemoveAllLabel",defaultValue:g(null,"duallistbox.removeAllLabel")},selectedListLabel:{changeFn:"setSelectedListLabel",defaultValue:g(null,"duallistbox.selectedListLabel")},nonSelectedListLabel:{changeFn:"setNonSelectedListLabel",defaultValue:g(null,"duallistbox.nonSelectedListLabel")},infoAll:{changeFn:"setInfoText",defaultValue:g("Showing all {0}","duallistbox.infoAll")},infoFiltered:{changeFn:"setInfoTextFiltered",defaultValue:g('<span class="label label-warning">Filtered</span> {0} from {1}',"duallistbox.infoFiltered")},infoEmpty:{changeFn:"setInfoTextEmpty",defaultValue:g("Empty list","infoEmpty")}},l=function(a){var b,c,d=k[a],f=e[a];return angular.isObject(d)&&(b=d.defaultValue,c=d.transformFn),f||(f=b),angular.isFunction(c)&&(f=c(f)),f},m=function(a){var b=k[a],c=b;return angular.isObject(b)&&(c=b.changeFn),c},n=function(){c.$watch(e.ngModel,function(){p(),o()}),c.$watch(i,o,!0),c.$watch(e.filterNonSelected,function(){o()}),c.$watch(e.filterSelected,function(){o()}),angular.forEach(k,function(a,b){e.$observe(b,function(){var a=m(b),c=l(b);d.bootstrapDualListbox(a,c,!0)})})},o=function(){b(function(){d.bootstrapDualListbox("refresh")})},p=function(){f||q()},q=function(){var b={};angular.forEach(k,function(a,c){var d=l(c);b[c]=d}),f=d.bootstrapDualListbox({bootstrap2Compatible:b.bootstrap2,filterTextClear:b.filterClear,filterPlaceHolder:b.filterPlaceholder,moveSelectedLabel:b.moveSelectedLabel,moveAllLabel:b.moveAllLabel,removeSelectedLabel:b.removeSelectedLabel,removeAllLabel:b.removeAllLabel,moveOnSelect:b.moveOnSelect,preserveSelectionOnMove:b.preserveSelection,selectedListLabel:b.selectedListLabel,nonSelectedListLabel:b.nonSelectedListLabel,helperSelectNamePostfix:b.postfix,selectOrMinimalHeight:b.selectMinHeight,showFilterInputs:b.filter,nonSelectedFilter:"",selectedFilter:"",infoText:b.infoAll,infoTextFiltered:b.infoFiltered,infoTextEmpty:b.infoEmpty,filterOnValues:b.filterValues});var g=d.bootstrapDualListbox("getContainer"),h=g.find(".box1 .filter");h.attr("ng-model",e.filterNonSelected),a(h)(c);var i=g.find(".box2 .filter");i.attr("ng-model",e.filterSelected),a(i)(c)};n(),c.$on("$destroy",function(){d.bootstrapDualListbox("destroy")})}}}]);